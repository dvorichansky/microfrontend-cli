# mf-cli

**mf-cli** â€” Ñ†Ğµ CLI-Ñ–Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾Ñ— Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ— Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ… Ğ²ĞµĞ±-Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºÑ–Ğ² Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ñ– Ğ¼Ñ–ĞºÑ€Ğ¾Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´-Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¸ Ğ· Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½ÑĞ¼ Module Federation, Webpack, React/Vue/Vanilla.

## ğŸ¯ ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ

Ğ†Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ” ÑˆĞ²Ğ¸Ğ´ĞºĞ¾ ÑÑ‚Ğ²Ğ¾Ñ€ÑĞ²Ğ°Ñ‚Ğ¸ shell-Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¸, Ğ¼Ñ–ĞºÑ€Ğ¾Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ¸ Ğ°Ğ±Ğ¾ ÑĞ¿Ñ–Ğ»ÑŒĞ½Ñ– Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ– Ğ· ÑƒĞ½Ñ–Ñ„Ñ–ĞºĞ¾Ğ²Ğ°Ğ½Ğ¾Ñ ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ”Ñ, Ñ‰Ğ¾ Ğ·Ğ¼ĞµĞ½ÑˆÑƒÑ” Ñ‡Ğ°Ñ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° Ğ¿Ñ–Ğ´Ğ²Ğ¸Ñ‰ÑƒÑ” ÑƒĞ·Ğ³Ğ¾Ğ´Ğ¶ĞµĞ½Ñ–ÑÑ‚ÑŒ Ğ¼Ñ–Ğ¶ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°Ğ¼Ğ¸.

## âš™ï¸ Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ

```bash
npx mf-cli
```

> ĞŸĞ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğ¾ Ğ²ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹ Node.js (Ğ²ĞµÑ€ÑÑ–Ñ 18 Ğ°Ğ±Ğ¾ Ğ½Ğ¾Ğ²Ñ–ÑˆĞ°)

## ğŸš€ ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚Ñ–

-   Ğ†Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ Ğ· Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½ÑĞ¼ `@clack/prompts`
-   ĞŸÑ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ° Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ–Ğ² Ñ‡ĞµÑ€ĞµĞ· CLI Ğ°Ğ±Ğ¾ ĞºĞ¾Ğ½Ñ„Ñ–Ğ³-Ñ„Ğ°Ğ¹Ğ» `mf-cli.config.json`
-   ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑÑ‚ÑŒ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ:
    -   shell-ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°
    -   Ğ¼Ñ–ĞºÑ€Ğ¾Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ñƒ
    -   ÑĞ¿Ñ–Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ (shared) Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ
-   ĞŸÑ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ° Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€ĞºÑ–Ğ²: `react`, `vue`, `vanilla`
-   ĞŸÑ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ° ÑÑ‚Ğ¸Ğ»Ñ–Ğ²: `tailwind`, `bootstrap`, `sass` Ğ°Ğ±Ğ¾ Ğ±ĞµĞ· ÑÑ‚Ğ¸Ğ»Ñ–Ğ²
-   ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ ESLint
-   Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ `.env.development` Ğ· Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¼ Ğ°Ğ±Ğ¾ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğ¼ Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ¼
-   ĞŸÑ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ĞºĞ° middleware-Ñ„ÑƒĞ½ĞºÑ†Ñ–Ğ¹ (before/after Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ—)

## ğŸ—ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸

```bash
npx mf-cli [options]

# ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´Ğ¸
npx mf-cli -n header -t microfrontend -f react --style tailwind
npx mf-cli --structure monorepo --type shell
```

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ğ¾Ğ¿Ñ†Ñ–Ñ—

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€      | ĞĞ¿Ğ¸Ñ                                          | Ğ’Ğ°Ñ€Ñ–Ğ°Ğ½Ñ‚Ğ¸                               |
| ------------- | --------------------------------------------- | -------------------------------------- |
| `--structure` | Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ                             | `standalone` \| `monorepo`             |
| `--type`      | Ğ¢Ğ¸Ğ¿ Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ                                   | `shell` \| `microfrontend` \| `shared` |
| `--name`      | ĞĞ°Ğ·Ğ²Ğ° Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ                                 | (Ğ±ÑƒĞ´ÑŒ-ÑĞºĞµ ÑƒĞ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğµ Ñ–Ğ¼'Ñ)              |
| `--framework` | Ğ¤Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€Ğº                                     | `react` \| `vue` \| `vanilla`          |
| `--style`     | Ğ¡Ñ‚Ğ¸Ğ»Ñ–ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€Ğº                        | `tailwind` \| `bootstrap` \| `none`    |
| `--sass`      | Ğ”Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Sass (Ğ½ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾, ÑĞºÑ‰Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ½Ğ¾ Tailwind) | Ğ¿Ñ€Ğ°Ğ¿Ğ¾Ñ€ (`--sass`)                      |
| `--no-eslint` | Ğ’Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ ESLint                               | Ğ¿Ñ€Ğ°Ğ¿Ğ¾Ñ€                                 |
| `--port`      | ĞŸĞ¾Ñ€Ñ‚ Ğ´Ğ»Ñ `.env.development`                   | Ñ‡Ğ¸ÑĞ»Ğ¾                                  |

## âš™ï¸ Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ° ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ

Ğ¤Ğ°Ğ¹Ğ» `mf-cli.config.json` Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ” Ğ·Ğ°Ğ·Ğ´Ğ°Ğ»ĞµĞ³Ñ–Ğ´ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‚Ğ¸ Ñ‚Ğ¸Ğ¿Ğ¾Ğ²Ñ– Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ:

```json
{
    "defaultStructure": "monorepo",
    "defaultType": "microfrontend",
    "defaultFramework": "react",
    "defaultStyleFramework": "tailwind",
    "eslintExtendPath": "./config/eslint-base.js",
    "middleware": {
        "beforeGenerate": ["./middleware/preGenerate.js"],
        "afterGenerate": ["./middleware/postGenerate.js"]
    }
}
```

## ğŸ”Œ Middleware

ĞœĞ¾Ğ¶Ğ½Ğ° Ğ²ĞºĞ°Ğ·Ğ°Ñ‚Ğ¸ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¸, ÑĞºÑ– Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°ÑÑ‚ÑŒÑÑ Ğ´Ğ¾ Ğ°Ğ±Ğ¾ Ğ¿Ñ–ÑĞ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ—:

-   `beforeGenerate`: Ğ·Ğ¼Ñ–Ğ½Ğ° ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ— Ğ¿ĞµÑ€ĞµĞ´ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ñ–Ñ”Ñ
-   `afterGenerate`: Ğ´Ñ–Ñ— Ğ¿Ñ–ÑĞ»Ñ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ (Ğ½Ğ°Ğ¿Ñ€Ğ¸ĞºĞ»Ğ°Ğ´, `npm install`)

```js
// middleware/preGenerate.js
module.exports = (options) => {
    options.name = `mf-${options.name}`;
    return options;
};
```

## ğŸ“¦ Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ğ¸

ĞŸÑ€Ğ¾Ñ”ĞºÑ‚Ğ¸ ÑÑ‚Ğ²Ğ¾Ñ€ÑÑÑ‚ÑŒÑÑ Ğ½Ğ° Ğ±Ğ°Ğ·Ñ– Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ… ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ–Ğ² Ğ´Ğ»Ñ:

-   React Ğ· Webpack + Module Federation
-   Vue Ğ· Webpack + Module Federation
-   Vanilla JS Ğ· Webpack + Module Federation

## ğŸ“ ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ¾Ñ— ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸

```
my-mf-app/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.tsx
â”œâ”€â”€ webpack.config.js
â”œâ”€â”€ .env.development
â”œâ”€â”€ package.json
â””â”€â”€ ...
```

## ğŸ“š Ğ›Ñ–Ñ†ĞµĞ½Ğ·Ñ–Ñ

MIT
